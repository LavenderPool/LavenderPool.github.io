<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Document</title>
   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
   <link rel="stylesheet" href="style.css">
   <style>
      *{
         font-family: 'Inter', sans-serif;
         transition-duration: 0.2s;

         /* Обнуление */
         margin: 0;
         padding: 0;
         box-sizing: border-box;
      }
   </style>
</head>
<body>
   <div class="wrapper">
      <header class="header">
         <div class="header__logo">
            <img src="img/logo.svg" alt="">
         </div>
         <div class="header__button">
            <a href="#" class="">
               <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                  <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
               </svg>
               Войти
            </a>
         </div>
      </header>


      <main class="main">
         <div class="main__up">
            <span>Продлевай срок</span>
            <span class="line"></span>
            <span>Оплачивай досрочно</span>
         </div>

         <div class="main__body">
            <div class="main__range">
               <label for="Range3" class="main__range-label">
                  Сумма займа
                  <div id="ssum">3000 ₽</div>
               </label>
               <input type="range" class="range" min="1000" max="30000" step="1000" id="Range3" value="3000">
            </div>
            <div class="main__range">
               <label for="Range2" class="main__range-label">
                  Срок займа
                  <div id="sday">15 <span>Дней</span></div>
               </label>
               <input type="range" class="range" min="7" max="40" step="1" id="Range2" value="15">
            </div>
            <div class="main__label">
               <div>
                  <div class="main__label-title">Проценты</div>
                  <span id="precentes">0</span>
               </div>
               <div>
                  <div class="main__label-title">Срок</div>
                  <span id="futureDate">27.08.2023</span>
               </div>
            </div>
            <button class="main_get">
               Получить 4 000 ₽
            </button>
            <button class="main__gos">
               <img src="/img/gos.svg" alt="">
               Получить через Госуслуги
            </button>
            <div class="main__note">Одобряем до 98% заявок через Госуслуги</div>
         </div>
      </main>
   </div>

   <script>
      const rangePrice = document.getElementById('Range3')
      const rangeDays = document.getElementById('Range2')

      // эвент на прайс
      rangePrice.addEventListener("input", () => {

         const min = rangePrice.min
         const max = rangePrice.max
         const currentVal = rangePrice.value
         document.getElementById('ssum').innerText = `${rangePrice.value} ₽`;

         rangePrice.style.backgroundSize = ((currentVal - min) / (max - min)) * 100 + "% 100%"

         updateLabel()
      } );

      // эвент на дни
      rangeDays.addEventListener("input", () => {
         const min = rangeDays.min
         const max = rangeDays.max
         const currentVal = rangeDays.value
         let stringDay = 'Дней';
         if(rangeDays.value > 20 && rangeDays.value < 40 && rangeDays.value % 10 == 1){
            stringDay = 'День'
         }else if(rangeDays.value > 20 && rangeDays.value < 40 && 5 > rangeDays.value % 10 )
         {
            stringDay = 'Дня';
         }
         document.getElementById('sday').innerHTML = `${rangeDays.value} <span>${stringDay}</span>`;

         rangeDays.style.backgroundSize = ((currentVal - min) / (max - min)) * 100 + "% 100%"

         updateLabel()
      })

      function updateLabel(){
         let precentes = rangePrice.value * 0.005 * rangeDays.value;
         document.getElementById('precentes').innerText = precentes;

         // Высчитывание даты
         var currentDate = new Date();
         currentDate.setTime(currentDate.getTime() +  rangeDays.value * 24 * 60 * 60 * 1000);
         
         let day = currentDate.getDate();
         let month = currentDate.getMonth() + 1; // Месяцы в JavaScript начинаются с 0
         let year = currentDate.getFullYear();
         day = day < 10 ? '0' + day : day;
         month = month < 10 ? '0' + month : month;

         document.getElementById('futureDate').innerText = `${day}.${month}.${year}`;
      }

      updateLabel()
   </script>
</body>
</html>